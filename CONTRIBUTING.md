# Начальная настройка (делается один раз)

# 1. Клонируем репозиторий (если еще не клонировали)
git clone git@github.com:feniks1632/System-Performance-Review.git
cd System-Performance-Review

# 2. Настраиваем пользователя (если еще не настроено)
git config user.name "Ваше Имя"
git config user.email "your.email@company.com"

# 3. Проверяем, что мы в ветке develop
git branch  # посмотреть текущую ветку
# Если не в develop, переключаемся:
git checkout develop


Создание новой фичи - ПОШАГОВО
Шаг 1: Подготовка - начинаем с чистого состояния

# Убедимся, что у нас нет незакоммиченных изменений
git status

# Если есть красные файлы - либо коммитим, либо убираем
# Вариант А: Сохраняем изменения в текущий коммит
git add .
git commit -m "fix: сохраняю текущие изменения перед новой фичей"

# Вариант Б: Временное сохранение (если не готовы коммитить)
git stash

# Вариант В: Отмена всех изменений (ОСТОРОЖНО!)
git checkout .


Шаг 2: Получаем последние изменения

# Переключаемся на develop
git checkout develop

# Скачиваем все последние изменения с сервера
git pull origin develop

# Проверяем, что всё обновилось
git log --oneline -5  # посмотреть последние 5 коммитов


Шаг 3: Создаем новую ветку для задачи

# Создаем ветку с понятным названием
git checkout -b feature/add-employee-goals-page

# Проверяем, что мы в новой ветке
git branch  # звездочка * показывает текущую ветку

Правила названия веток:

feature/ - для новой функциональности

fix/ - для исправления багов

hotfix/ - для срочных исправлений

docs/ - для документации


Шаг 4: Разработка - работаем над кодом
Делаем изменения в файлах, затем:

# 1. Проверяем что изменилось
git status

# 2. Видим список измененных файлов (красным - не добавлены, зеленым - добавлены)

# 3. Добавляем конкретные файлы ИЛИ все изменения
# Вариант А: Добавляем все изменения
git add .

# Вариант Б: Добавляем конкретные файлы
git add backend/apps/goals/models.py
git add backend/apps/goals/views.py

# 4. Проверяем что добавилось в staged
git status  # теперь файлы должны быть зелеными

# 5. Создаем коммит с понятным описанием
git commit -m "feat: добавление модели EmployeeGoal с полями название, описание, сроки"

# 6. Повторяем шаги 1-5 для следующих изменений


Шаг 5: Публикуем ветку на сервер

# Пушим ветку в удаленный репозиторий
git push -u origin feature/add-employee-goals-page # add-employee-goals-page - это название фичи

# Флаг -u запоминает связь, дальше можно просто git push

Работа с коммитами - подробнее
Частые сценарии:
Сценарий 1: Я сделал изменения в нескольких файлах, но они относятся к разным задачам

# Добавляем только нужные файлы
git add file1.py file2.py
git commit -m "feat: основная функциональность"

git add file3.py file4.py  
git commit -m "docs: обновление комментариев"

Сценарий 2: Я забыл добавить файл в последний коммит

# Добавляем забытый файл и дополняем предыдущий коммит
git add forgotten_file.py
git commit --amend  # откроется редактор чтобы обновить сообщение коммита

# ИЛИ одной командой (если не хотим менять сообщение)
git commit --amend --no-edit

Сценарий 3: Я хочу объединить несколько коммитов в один

# Смотрим историю коммитов
git log --oneline

# Делаем interactive rebase для последних 3 коммитов
git rebase -i HEAD~3
# В редакторе оставляем "pick" для первого коммита, 
# а для остальных пишем "squash" или "fixup"

Сценарий 4: Я испортил код и хочу откатиться к последнему рабочему коммиту

# Отменяем все незакоммиченные изменения
git checkout .

# ИЛИ откатываем конкретный файл
git checkout -- filename.py


Ежедневный workflow

начинаем работу:
# Переключаемся на develop и обновляемся
git checkout develop
git pull origin develop

# Переключаемся на свою feature ветку
git checkout feature/my-feature

# Обновляем feature ветку последними изменениями из develop
git merge develop
# Если есть конфликты - решаем их, затем:
git add .
git commit -m "merge: обновление из develop"


В течение дня: работаем
# Делаем изменения в коде
# Часто коммитим с понятными сообщениями:
git add .
git commit -m "feat: добавляет валидацию сроков для целей"

git add .  
git commit -m "test: добавляет тесты для валидации целей"


заканчиваем работу:
# Пушим накопленные коммиты
git push origin feature/my-feature

# ИЛИ если это первый пуш в ветке:
git push -u origin feature/my-feature

Помощь и диагностика
Полезные команды для проверки состояния:

# Текущий статус
git status

# История коммитов в текущей ветке
git log --oneline -10

# Показать различия между ветками
git diff develop..feature/my-feature

# Показать какие ветки есть
git branch -a

# Показать неотслеживаемые файлы
git clean -n  # покажет что будет удалено

Если что-то пошло не так:
# Отмена последнего коммита (сохраняет изменения как недобавленные)
git reset --soft HEAD~1

# Полная отмена последнего коммита (удаляет изменения)
git reset --hard HEAD~1

# Временное сохранение изменений без коммита
git stash

# Вернуть временно сохраненные изменения
git stash pop


Не делаем force-push в общие ветки!!!
